{"version":3,"file":null,"sources":["../src/widget.js"],"sourcesContent":["const {rpc, React, store} = Serverboards\nconst plugin_id=\"serverboards.plugin.serviceheatmap\"\n\nconst Model = React.createClass({\n  getInitialState(){\n    return {\n      services: store.getState().serverboard.serverboard.services\n    }\n  },\n  updateServices(){\n    this.setState( {\n      services: store.getState().serverboard.serverboard.services\n    } )\n  },\n  componentDidMount(){\n    this.unsubscribe = store.subscribe( () => this.updateServices() )\n  },\n  componentWillUnmount(){\n    this.unsubscribe()\n  },\n  render(){\n    return <View services={this.state.services}/>\n  }\n})\n\nfunction View(props){\n  return (\n    <div className=\"ui heatmap\">\n      {props.services.map( (s) => (\n        <span\n          className={`cell ${Serverboards.utils.colorize(s.tags[0] || \"\")}`}\n          title={`${s.name}: ${s.tags.join(', ')}`}\n          data-tooltip={`${s.name}: ${s.tags.join(', ')}`}\n          onClick={() => Serverboards.store.goto(`/services/${s.uuid}`)}\n          style={{cursor: \"pointer\"}}\n          />\n      ) ) }\n    </div>\n  )\n}\n\nfunction main(el, config){\n  Serverboards.ReactDOM.render(<Model/>, el)\n\n  return function(){\n    Serverboards.ReactDOM.unmountComponentAtNode(el)\n  }\n}\n\nServerboards.add_widget(`${plugin_id}/widget`, main)\n"],"names":["Serverboards","rpc","React","store","plugin_id","Model","createClass","getInitialState","services","getState","serverboard","updateServices","setState","componentDidMount","unsubscribe","subscribe","componentWillUnmount","render","state","props","map","s","utils","colorize","tags","name","join","goto","uuid","cursor","el","config","ReactDOM","unmountComponentAtNode","add_widget","main"],"mappings":";;;;;;kBAA4BA;AAArBC,IAAAA,kBAAAA;AAAKC,IAAAA,oBAAAA;AAAOC,IAAAA,oBAAAA;AACbC,IAAAA,UAAU;AAEVC,IAAAA,MAAQH,MAAMI,WAAN,CAAkB,qBAC9BC,eAD8B,2BACb,CACf,MAAO,CACLC,SAAUL,MAAMM,QAAN,GAAiBC,WAAjB,CAA6BA,WAA7B,CAAyCF,QAD9C,CAGR,CAL6B,CAM9BG,cAN8B,0BAMd,CACd,KAAKC,QAAL,CAAe,CACbJ,SAAUL,MAAMM,QAAN,GAAiBC,WAAjB,CAA6BA,WAA7B,CAAyCF,QADtC,CAAf,CAGD,CAV6B,CAW9BK,iBAX8B,6BAWX,gBACjB,KAAKC,WAAL,CAAmBX,MAAMY,SAAN,CAAiB,wBAAWJ,cAAL,EAAN,CAAjB,CACpB,CAb6B,CAc9BK,oBAd8B,gCAcR,CACpB,KAAKF,WAAL,EACD,CAhB6B,CAiB9BG,MAjB8B,kBAiBtB,CACN,2BAAQ,IAAD,EAAM,SAAU,KAAKC,KAAL,CAAWV,QAA3B,EACR,CAnB6B,CAAlB;AAsBd,aAAA,CAAcW,CAAd,CAAoB,CAClB,kCACO,UAAU,YAAf,EACGA,EAAMX,QAAN,CAAeY,GAAf,CAAoB,SAACC,CAAD,qCAEjB,kBAAmBrB,aAAasB,KAAb,CAAmBC,QAAnB,CAA4BF,EAAEG,IAAF,CAAO,CAAP,GAAa,EAAzC,CADrB,CAEE,MAAUH,EAAEI,IAAZ,MAAqBJ,EAAEG,IAAF,CAAOE,IAAP,CAAY,IAAZ,CAFvB,CAGE,eAAiBL,EAAEI,IAAnB,MAA4BJ,EAAEG,IAAF,CAAOE,IAAP,CAAY,IAAZ,CAH9B,CAIE,QAAS,uCAAmBvB,KAAb,CAAmBwB,IAAnB,cAAqCN,EAAEO,IAAvC,CAAN,CAJX,CAKE,MAAO,CAACC,OAAQ,SAAT,CALT,EADmB,CAApB,CADH,CAYH,CAED,aAAA,CAAcC,CAAd,CAAkBC,CAAlB,CAAyB,CAGvB,oBAFaC,QAAb,CAAsBf,MAAtB,CAA6B,oBAAC,KAAD,MAA7B,CAAuCa,CAAvC,CAEA,CAAO,UAAU,CACf9B,aAAagC,QAAb,CAAsBC,sBAAtB,CAA6CH,CAA7C,CACD,CACF,CAED9B,aAAakC,UAAb,CAA2B9B,SAA3B,WAA+C+B,IAA/C;;"}